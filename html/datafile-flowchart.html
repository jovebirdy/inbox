<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>flow chart</title>
    <style type="text/css">
    .end-element { background-color : #FFCCFF; }
    </style>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.0/raphael-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="http://flowchart.js.org/flowchart-latest.js"></script>
    <script type="text/javascript" src="http://ui.cloud.qiyi.domain/script/jquery.min.js"></script>
    <!-- <script src="../release/flowchart.min.js"></script> -->
    <script>
    window.onload = function () {
    };
    function run(obj){
    var btn;
    var cd;
    var chart;
    var canvas;
    if(obj.id == 'run1'){
    btn = document.getElementById("run1");
    cd = document.getElementById("code1");
    canvas = "canvas1";
    }else if(obj.id == 'run2'){
    btn = document.getElementById("run2");
    cd = document.getElementById("code2");
    canvas = "canvas2";
    }
    (btn.onclick = function () {
    var code = cd.value;
    if (chart) {
    chart.clean();
    }
    chart = flowchart.parse(code);
    chart.drawSVG(canvas, {
    // 'x': 30,
    // 'y': 50,
    'line-width': 3,
    'maxWidth': 3,//ensures the flowcharts fits within a certian width
    'line-length': 50,
    'text-margin': 10,
    'font-size': 14,
    'font': 'normal',
    'font-family': 'Helvetica',
    'font-weight': 'normal',
    'font-color': 'black',
    'line-color': 'black',
    'element-color': 'black',
    'fill': 'white',
    'yes-text': 'yes',
    'no-text': 'no',
    'arrow-end': 'block',
    'scale': 1,
    'symbols': {
    'start': {
    'font-color': 'red',
    'element-color': 'green',
    'fill': 'yellow'
    },
    'end':{
    'class': 'end-element'
    }
    },
    'flowstate' : {
    'past' : { 'fill' : '#CCCCCC', 'font-size' : 12},
    'current' : {'fill' : 'yellow', 'font-color' : 'red', 'font-weight' : 'bold'},
    'future' : { 'fill' : '#FFFF99'},
    'request' : { 'fill' : 'blue'},
    'invalid': {'fill' : '#444444'},
    'approved' : { 'fill' : '#58C4A3', 'font-size' : 12, 'yes-text' : 'APPROVED', 'no-text' : 'n/a' },
    'rejected' : { 'fill' : '#C45879', 'font-size' : 12, 'yes-text' : 'n/a', 'no-text' : 'REJECTED' }
    }
    });
    $('[id^=sub1]').click(function(){
    alert('info here');
    });
    })();

    }
    </script>
  </head>
  <body>
    <div><textarea id="code1" style="width: 100%;" rows="11">
      st=>start: 新建脚本
      e=>end: 结束
      op1=>operation: 选择文件
      io1=>inputoutput: js生成表格
      cond1=>condition: 点击删除文件按钮?
      cond2=>condition: 点击保存按钮?
      io2=>inputoutput: 上传文件到OSS
      io3=>inputoutput: 更新数据库,退出
      op5=>operation: 点击删除文件按钮
      io4=>inputoutput: js删除表格
      io5=>inputoutput: 不做任何改变, 退出编辑页面
      st->op1->io1->cond1
      cond1(no)->cond2
      cond1(yes, right)->io4
      cond2(yes, right)->io2(right)->io3(right)->e
      cond2(no)->io5->e
    </textarea></div>
    <div><button id="run1" type="button" onclick="run(this)">Run</button></div>
    <div><textarea id="code2" style="width: 100%;" rows="11">
      st=>start: 更新脚本
      e=>end: 结束
      op1=>operation: 选择文件
      io1=>inputoutput: 上传文件到OSS
      io2=>inputoutput: js生成表格
      io3=>inputoutput: 更新数据库
      cond1=>condition: 点击删除文件按钮?
      cond2=>condition: 点击保存按钮?
      io4=>inputoutput: js删除表格
      io5=>inputoutput: 退出编辑页面
      io6=>inputoutput: 更新数据库,退出
      st->op1->io1->io2->io3->cond1
      cond1(no)->cond2
      cond1(yes, right)->io4
      cond2(yes)->io6->e
      cond2(no, right)->io5->e
    </textarea></div>
    <div><button id="run2" type="button" onclick="run(this)">Run</button></div>
    <div id="canvas1" style="float:left;"></div>
    <div id="canvas2" style="float:left;"></div>
  </body>
</html>
